<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gangsta's Paradise Game and Non-Existence of RNE • RelationalContracts</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Gangsta's Paradise Game and Non-Existence of RNE">
<meta property="og:description" content="RelationalContracts">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RelationalContracts</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/index.html">Manuals</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/skranz/RelationalContracts">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="3_Gangstas_Paradise_files/header-attrs-2.5/header-attrs.js"></script><link href="3_Gangstas_Paradise_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="3_Gangstas_Paradise_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Gangsta’s Paradise Game and Non-Existence of RNE</h1>
            
      
      
      <div class="hidden name"><code>3_Gangstas_Paradise.Rmd</code></div>

    </div>

    
    
<p>In the newest version of our paper “Reconciliating relational contracting and hold-up: A model of repeated negotiations” by Susanne Goldlücke and me, we introduce the <em>Gangsta’s Paradise</em> game to exemplify that repeated negotiation equilibria (RNE) can fail to exist. This document accompanies our paper and shall help to get a better theoretical intuition of the existence problem and how T-RNE solve it, as well as showcase how the R package <code>RelationialContracts</code> can help to quickly numerically explore these issues.</p>
<p>We first illustrate the existence problem. Then we show how for this example existence can be reestablished by a finer state space and how T-RNE essentially find the approbriate finer state space. Finally, we illustrate how similar effects of state space definition already arise for Markov perfect equilibria, which means it should not be surprising to find such effects also for RNE and T-RNE.</p>
<p>The Gangsta’s Paradise game has two states: a prisoners’ dilemma state <code>x0</code> and paradise <code>x_paradise</code>. In <code>x0</code> players play a prisoners’ dilemma game with the following payoff matrix:</p>
<table class="table"><tbody>
<tr class="odd">
<td></td>
<td>C</td>
<td>D</td>
</tr>
<tr class="even">
<td>C</td>
<td>1,1</td>
<td>-10,3</td>
</tr>
<tr class="odd">
<td>D</td>
<td>3,-10</td>
<td>0,0</td>
</tr>
</tbody></table>
<p>Players move to paradise if and only if both cooperate. In paradise, players laze around and get a fixed payoff of <code>(2,2)</code> without performing any actions. Paradise is an absorbing state in which players stay forever.</p>
<p>The following code creates the game with the <code>RelationalContracts</code> package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw">RelationalContracts</span>)
<span class="co"># Since we will define several similar games,</span>
<span class="co"># we define action spaces and payoff functions</span>
<span class="co"># as global variables that we can reuse later.</span>

<span class="co"># Action spaces in x0</span>
<span class="kw">A1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(a1=<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"C"</span>,<span class="st">"D"</span>))
<span class="kw">A2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(a2=<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"C"</span>,<span class="st">"D"</span>))

<span class="co"># Payoff functions in x0</span>
<span class="kw">pi1</span> <span class="op">=</span> <span class="op">~</span><span class="fu">case_when</span>(
  <span class="kw">a1</span> <span class="op">==</span> <span class="st">"C"</span> <span class="op">&amp;</span> <span class="kw">a2</span><span class="op">==</span> <span class="st">"C"</span> <span class="op">~</span> <span class="fl">2</span>,
  <span class="kw">a1</span> <span class="op">==</span> <span class="st">"D"</span> <span class="op">&amp;</span> <span class="kw">a2</span><span class="op">==</span> <span class="st">"C"</span> <span class="op">~</span> <span class="fl">3</span>,
  <span class="kw">a1</span> <span class="op">==</span> <span class="st">"C"</span> <span class="op">&amp;</span> <span class="kw">a2</span><span class="op">==</span> <span class="st">"D"</span> <span class="op">~</span> <span class="op">-</span><span class="fl">10</span>,
  <span class="kw">a1</span> <span class="op">==</span> <span class="st">"D"</span> <span class="op">&amp;</span> <span class="kw">a2</span><span class="op">==</span> <span class="st">"D"</span> <span class="op">~</span> <span class="fl">0</span>
)
<span class="kw">pi2</span><span class="op">=</span><span class="op">~</span><span class="fu">case_when</span>(
  <span class="kw">a1</span> <span class="op">==</span> <span class="st">"C"</span> <span class="op">&amp;</span> <span class="kw">a2</span><span class="op">==</span> <span class="st">"C"</span> <span class="op">~</span> <span class="fl">2</span>,
  <span class="kw">a1</span> <span class="op">==</span> <span class="st">"D"</span> <span class="op">&amp;</span> <span class="kw">a2</span><span class="op">==</span> <span class="st">"C"</span> <span class="op">~</span> <span class="op">-</span><span class="fl">10</span>,
  <span class="kw">a1</span> <span class="op">==</span> <span class="st">"C"</span> <span class="op">&amp;</span> <span class="kw">a2</span><span class="op">==</span> <span class="st">"D"</span> <span class="op">~</span> <span class="fl">3</span>,
  <span class="kw">a1</span> <span class="op">==</span> <span class="st">"D"</span> <span class="op">&amp;</span> <span class="kw">a2</span><span class="op">==</span> <span class="st">"D"</span> <span class="op">~</span> <span class="fl">0</span>
)

<span class="kw">g</span> <span class="op">=</span> <span class="kw">g0</span> <span class="op">=</span> <span class="fu"><a href="../reference/rel_game.html">rel_game</a></span>() <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_states.html">rel_state</a></span>(<span class="st">"x0"</span>, A1=<span class="kw">A1</span>, A2=<span class="kw">A2</span>, pi1.form=<span class="kw">pi1</span>, pi2.form=<span class="kw">pi2</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_states.html">rel_state</a></span>(<span class="st">"x.paradise"</span>, pi1=<span class="fl">2</span>, pi2=<span class="fl">2</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x0"</span>,<span class="st">"x.paradise"</span>,a1=<span class="st">"C"</span>,a2=<span class="st">"C"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_compile.html">rel_compile</a></span>()
</pre></div>
<p>There are combinations of discount factors and negotiation probabilities for which an RNE exists. Since this is a <em>weakly directional game</em>, we can use the function <code>rel_rne</code> to find an RNE (when speaking of RNE, we always mean simple RNE as defined in our paper):</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fu"><a href="../reference/rel_rne.html">rel_rne</a></span>(<span class="kw">g</span>,delta = <span class="fl">0.5</span>, rho=<span class="fl">0.1</span>) <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/get_eq.html">get_eq</a></span>() <span class="op">%&gt;%</span>
  <span class="fu">select</span>(<span class="kw">x</span>,<span class="kw">ae.lab</span>, <span class="kw">a1.lab</span>, <span class="kw">a2.lab</span>, <span class="kw">r1</span>,<span class="kw">r2</span>,<span class="kw">U</span>,<span class="kw">v1</span>,<span class="kw">v2</span>)
</pre></div>
<pre><code>## 
## Solve weakly directional state x0 ... ok</code></pre>
<pre><code>## # A tibble: 2 x 9
##   x          ae.lab  a1.lab  a2.lab     r1    r2     U    v1    v2
##   &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 x0         "C | C" "D | D" "D | D"     2     2     4 0.182 0.182
## 2 x.paradise " | "   " | "   " | "       2     2     4 2     2</code></pre>
<p>This RNE implements <code>(C,C)</code> on the equilibrium path and as punishment (and under disagreement) mutual defection is played. For a lower discount factor, we can find an RNE where only <code>(D,D)</code> can be implemented on the equilibrium path:</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="fu"><a href="../reference/rel_rne.html">rel_rne</a></span>(<span class="kw">g</span>,delta = <span class="fl">0.2</span>, rho=<span class="fl">0.1</span>) <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/get_eq.html">get_eq</a></span>() <span class="op">%&gt;%</span>
  <span class="fu">select</span>(<span class="kw">x</span>,<span class="kw">ae.lab</span>, <span class="kw">a1.lab</span>, <span class="kw">a2.lab</span>, <span class="kw">r1</span>,<span class="kw">r2</span>,<span class="kw">U</span>,<span class="kw">v1</span>,<span class="kw">v2</span>)
</pre></div>
<pre><code>## 
## Solve weakly directional state x0 ... ok</code></pre>
<pre><code>## # A tibble: 2 x 9
##   x          ae.lab  a1.lab  a2.lab     r1    r2     U    v1    v2
##   &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 x0         "D | D" "D | D" "D | D"     0     0     0     0     0
## 2 x.paradise " | "   " | "   " | "       2     2     4     2     2</code></pre>
<div id="non-existence-of-rne" class="section level3">
<h3 class="hasAnchor">
<a href="#non-existence-of-rne" class="anchor"></a>Non-existence of RNE</h3>
<p>For some combinations of <code>delta</code> and <code>rho</code> no RNE exists in this game. An example is <code>delta=0.5</code> and <code>rho=0.5</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="fu"><a href="../reference/rel_rne.html">rel_rne</a></span>(<span class="kw">g</span>,delta = <span class="fl">0.5</span>, rho=<span class="fl">0.5</span>)
</pre></div>
<pre><code>## 
## Solve weakly directional state x0 ...</code></pre>
<pre><code>## Error in rel_rne(g, delta = 0.5, rho = 0.5): Cannot find an RNE when trying to solve the weakly directional state x0</code></pre>
<p>Let us illustrate why no RNE exists. First, assume that the RNE can only implement <code>(D,D)</code> on the equilibrium path. Then paradise would never be reached and each player has zero negotiation payoffs in state <code>x0</code>, i.e. <code>r1(x0)=r2(x0)=0</code>. This is only an RNE if no SPE of the truncated game with these negotiation payoff can implement higher joint payoffs. We can solve for the optimal simple SPE in that truncated game as follows:</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="kw">g</span> <span class="op">=</span> <span class="fu"><a href="../reference/rel_spe.html">rel_spe</a></span>(<span class="kw">g</span>, delta=<span class="fl">0.5</span>, rho=<span class="fl">0.5</span>, r1 = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>,<span class="fl">2</span>), r2=<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>,<span class="fl">2</span>))
<span class="kw">g</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/get_eq.html">get_eq</a></span>() <span class="op">%&gt;%</span>
  <span class="fu">select</span>(<span class="kw">x</span>,<span class="kw">ae.lab</span>,<span class="kw">r1</span>,<span class="kw">r2</span>,<span class="kw">U</span>,<span class="kw">v1</span>,<span class="kw">v2</span>)
</pre></div>
<pre><code>## # A tibble: 2 x 7
##   x          ae.lab     r1    r2     U    v1    v2
##   &lt;chr&gt;      &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 x0         "C | C"     2     2     4     0     0
## 2 x.paradise " | "       2     2     4     2     2</code></pre>
<p>We see that the optimal simple SPE can implement <code>(C,C)</code> in the truncated game. This means there is no RNE in which <code>(D,D)</code> is played on the equilibrium path.</p>
<p>Now let us assume that we have an RNE that would implement <code>(C,C)</code> on the equilibrium path. This would yield negotiation payoffs of 2 for each player in state <code>x0</code>. Let us compute the optimal simple SPE in the corresponding truncated game.</p>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="co"># Solve SPE in truncated game assuming given negotiation payoffs</span>
<span class="co"># r1 and r2 that result if (C,C) could be implemented</span>
<span class="kw">g</span> <span class="op">=</span> <span class="fu"><a href="../reference/rel_spe.html">rel_spe</a></span>(<span class="kw">g</span>, delta=<span class="fl">0.5</span>, rho=<span class="fl">0.5</span>, r1 = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>,<span class="fl">2</span>), r2=<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>,<span class="fl">2</span>))
<span class="kw">g</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/get_eq.html">get_eq</a></span>() <span class="op">%&gt;%</span>
  <span class="fu">select</span>(<span class="kw">x</span>,<span class="kw">ae.lab</span>,<span class="kw">r1</span>,<span class="kw">r2</span>,<span class="kw">U</span>,<span class="kw">v1</span>,<span class="kw">v2</span>)
</pre></div>
<pre><code>## # A tibble: 2 x 7
##   x          ae.lab     r1    r2     U    v1    v2
##   &lt;chr&gt;      &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 x0         "D | D" 0.667 0.667  1.33 0.667 0.667
## 2 x.paradise " | "   2     2      4    2     2</code></pre>
<p>With these negotiation payoffs only <code>(D,D)</code> can be implemented in the truncated game! For the intuition, note that if one deviates from <code>(C,C)</code>, one does not move to paradise. Yet, higher negotiation payoffs in state <code>x0</code> can make this state sufficiently attractive compared to paradise so that deviation from <code>(C,C)</code> cannot be deterred anymore.</p>
<p>So <code>(C,C)</code> could only be implemented if and only if players assume that <code>(D,D)</code> will be implemented in future negotiations. That causes existence failure of RNE.</p>
</div>
<div id="getting-existence-with-a-finer-state-space" class="section level3">
<h3 class="hasAnchor">
<a href="#getting-existence-with-a-finer-state-space" class="anchor"></a>Getting Existence with a Finer State Space</h3>
<p>The non-existence problem arises because any assumed negotiation outcome in state <code>x0</code> creates a contradiction. One solution to these contradictions might be that players allow different negotiation outcomes if state <code>x0</code> is reached repeatedly. We can model this by artificially splitting the state <code>x0</code> into multiple states e.g. <code>x0</code> and <code>x1</code> in which exactly the same stage game is played but different negotiation outcomes would be allowed.</p>
<div id="first-guess-the-first-period-is-different--" class="section level4">
<h4 class="hasAnchor">
<a href="#first-guess-the-first-period-is-different--" class="anchor"></a>First Guess: The first period is different..</h4>
<p>Perhaps a first thought that comes to mind is that the first period is different. Let us assume in the first period, we start in state <code>x0</code> but in in later periods the prisoners’ dilemma state is labeled state <code>x1</code> and may have a different negotiation outcome.</p>
<div class="sourceCode" id="cb15"><pre class="downlit">
<span class="co"># Game in which PD state is called x0 in first period</span>
<span class="co"># and x1 in later periods.</span>
<span class="kw">g</span> <span class="op">=</span> <span class="fu"><a href="../reference/rel_game.html">rel_game</a></span>() <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_states.html">rel_states</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"x0"</span>,<span class="st">"x1"</span>), A1=<span class="kw">A1</span>, A2=<span class="kw">A2</span>, pi1.form=<span class="kw">pi1</span>, pi2.form=<span class="kw">pi2</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_states.html">rel_state</a></span>(<span class="st">"x.paradise"</span>, pi1=<span class="fl">2</span>, pi2=<span class="fl">2</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x0"</span>,<span class="st">"x.paradise"</span>,a1=<span class="st">"C"</span>,a2=<span class="st">"C"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x0"</span>,<span class="st">"x1"</span>,a1=<span class="st">"D"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x0"</span>,<span class="st">"x1"</span>,a2=<span class="st">"D"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x1"</span>,<span class="st">"x.paradise"</span>,a1=<span class="st">"C"</span>,a2=<span class="st">"C"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_compile.html">rel_compile</a></span>()
</pre></div>
<p>As we still have a weakly directional game, we can directly compute the RNE. Simple theoretical arguments can show that an RNE for a coarser state remains an RNE if we create a finer state space by splitting states into multiple states with different labels. We will show further below that an appropriately chosen finer state space can cause an RNE to exist, i.e. in general new RNE can show up with a finer state space. Yet, looking at our previous two examples for which RNE existed, we essentially find again the same RNE:</p>
<div class="sourceCode" id="cb16"><pre class="downlit">
<span class="co"># RNE with mutual cooperation</span>
<span class="fu"><a href="../reference/rel_rne.html">rel_rne</a></span>(<span class="kw">g</span>,delta = <span class="fl">0.5</span>, rho=<span class="fl">0.1</span>) <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/get_eq.html">get_eq</a></span>() <span class="op">%&gt;%</span>
  <span class="fu">select</span>(<span class="kw">x</span>,<span class="kw">ae.lab</span>, <span class="kw">a1.lab</span>, <span class="kw">a2.lab</span>, <span class="kw">r1</span>,<span class="kw">r2</span>,<span class="kw">U</span>,<span class="kw">v1</span>,<span class="kw">v2</span>)
</pre></div>
<pre><code>## 
## Solve weakly directional state x1 ... ok</code></pre>
<pre><code>## # A tibble: 3 x 9
##   x          ae.lab  a1.lab  a2.lab     r1    r2     U    v1    v2
##   &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 x0         "C | C" "D | D" "D | D"     2     2     4 0.182 0.182
## 2 x1         "C | C" "D | D" "D | D"     2     2     4 0.182 0.182
## 3 x.paradise " | "   " | "   " | "       2     2     4 2     2</code></pre>
<div class="sourceCode" id="cb19"><pre class="downlit">
<span class="co"># Lower discount factor: RNE has mutual defection</span>
<span class="fu"><a href="../reference/rel_rne.html">rel_rne</a></span>(<span class="kw">g</span>,delta = <span class="fl">0.2</span>, rho=<span class="fl">0.1</span>) <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/get_eq.html">get_eq</a></span>() <span class="op">%&gt;%</span>
  <span class="fu">select</span>(<span class="kw">x</span>,<span class="kw">ae.lab</span>, <span class="kw">a1.lab</span>, <span class="kw">a2.lab</span>, <span class="kw">r1</span>,<span class="kw">r2</span>,<span class="kw">U</span>,<span class="kw">v1</span>,<span class="kw">v2</span>)
</pre></div>
<pre><code>## 
## Solve weakly directional state x1 ... ok</code></pre>
<pre><code>## # A tibble: 3 x 9
##   x          ae.lab  a1.lab  a2.lab     r1    r2     U    v1    v2
##   &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 x0         "D | D" "D | D" "D | D"     0     0     0     0     0
## 2 x1         "D | D" "D | D" "D | D"     0     0     0     0     0
## 3 x.paradise " | "   " | "   " | "       2     2     4     2     2</code></pre>
<p>Now let’s look at the case <code>delta=0.5</code> and <code>rho=0.5</code> for which no RNE existed with a single state <code>x0</code>. Will we now find an RNE where in state <code>x0</code> (first period) <code>(C,C)</code> is played and in later periods <code>(D,D)</code>?</p>
<div class="sourceCode" id="cb22"><pre class="downlit">
<span class="fu"><a href="../reference/rel_rne.html">rel_rne</a></span>(<span class="kw">g</span>,delta = <span class="fl">0.5</span>, rho=<span class="fl">0.5</span>) <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/get_eq.html">get_eq</a></span>() <span class="op">%&gt;%</span>
  <span class="fu">select</span>(<span class="kw">x</span>,<span class="kw">ae.lab</span>, <span class="kw">a1.lab</span>, <span class="kw">a2.lab</span>, <span class="kw">r1</span>,<span class="kw">r2</span>,<span class="kw">U</span>,<span class="kw">v1</span>,<span class="kw">v2</span>)
</pre></div>
<pre><code>## 
## Solve weakly directional state x1 ...</code></pre>
<pre><code>## Error in rel_rne(g, delta = 0.5, rho = 0.5): Cannot find an RNE when trying to solve the weakly directional state x1</code></pre>
<p>Unfortunately, not. Still no RNE exists. While in state <code>x0</code> <code>(C,C)</code> could be implemented, assuming that in state <code>x1</code> always <code>(D,D)</code> would be played causes the same problem as if there would be just a single state: the continuation equilibria from period 2 onward don’t satisfy the RNE conditions.</p>
</div>
<div id="second-attempt-alternating-states" class="section level4">
<h4 class="hasAnchor">
<a href="#second-attempt-alternating-states" class="anchor"></a>Second attempt: Alternating states</h4>
<p>However, there is another split of the original state <code>x0</code> such that an RNE exists. Assume that the states <code>x0</code> and <code>x1</code> alternate each period as long as paradise is not yet reached. Then there is an RNE where in state <code>x0</code> <code>(C,C)</code> is played and in state <code>x1</code> <code>(D,D)</code> (and another RNE the other way round).</p>
<p>Unfortunately, since this is not a weakly directional game the <code>RelationalContracts</code> package has no function to automatically compute the corresponding RNE. But we can semi-automatically verify that an RNE exists. First, we want to compute the joint continuation payoffs <code>U</code> of a SPE with these action profiles. We can specify it by solving the following helper game, where we have fixed stage game payoffs according to these equilibrium path action profiles:</p>
<div class="sourceCode" id="cb25"><pre class="downlit">
<span class="kw">helper.game</span> <span class="op">=</span> <span class="kw">g</span> <span class="op">=</span> <span class="fu"><a href="../reference/rel_game.html">rel_game</a></span>() <span class="op">%&gt;%</span>
  <span class="co"># Assume (C,C) is played in x0</span>
  <span class="fu"><a href="../reference/rel_states.html">rel_state</a></span>(<span class="st">"x0"</span>, pi1=<span class="fl">2</span>, pi2=<span class="fl">2</span>) <span class="op">%&gt;%</span>
  <span class="co"># Assume (D,D) is played in x1</span>
  <span class="fu"><a href="../reference/rel_states.html">rel_state</a></span>(<span class="st">"x1"</span>, pi1=<span class="fl">0</span>, pi2=<span class="fl">0</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_states.html">rel_state</a></span>(<span class="st">"x.paradise"</span>, pi1=<span class="fl">2</span>, pi2=<span class="fl">2</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x0"</span>,<span class="st">"x.paradise"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x1"</span>,<span class="st">"x0"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_compile.html">rel_compile</a></span>()

<span class="kw">helper.game</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/rel_spe.html">rel_spe</a></span>(delta=<span class="fl">0.5</span>, rho=<span class="fl">0.5</span>) <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/get_eq.html">get_eq</a></span>() <span class="op">%&gt;%</span> <span class="fu">select</span>(<span class="kw">x</span>,<span class="kw">U</span>)
</pre></div>
<pre><code>## # A tibble: 3 x 2
##   x              U
##   &lt;chr&gt;      &lt;dbl&gt;
## 1 x0             4
## 2 x1             2
## 3 x.paradise     4</code></pre>
<p>We get nice round joint payoffs of <code>U(x0)=4</code> and <code>U(x1)=2</code>. Negotiation payoffs just split these joint payoffs equally, i.e. <code>r1(x0)=r2(x0)=2</code> and <code>r1(x1)=r2(x1)=1</code>.</p>
<p>We now specify the true game with alternating states <code>x0</code> and <code>x1</code> and solve for the SPE in the truncated game with these negotiation payoffs.</p>
<div class="sourceCode" id="cb27"><pre class="downlit">
<span class="co"># x0 and x1 alternate</span>
<span class="kw">g</span> <span class="op">=</span> <span class="kw">g01</span> <span class="op">=</span> <span class="fu"><a href="../reference/rel_game.html">rel_game</a></span>() <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_states.html">rel_states</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"x0"</span>,<span class="st">"x1"</span>), A1=<span class="kw">A1</span>, A2=<span class="kw">A2</span>, pi1.form=<span class="kw">pi1</span>, pi2.form=<span class="kw">pi2</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_states.html">rel_state</a></span>(<span class="st">"x.paradise"</span>, pi1=<span class="fl">2</span>, pi2=<span class="fl">2</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x0"</span>,<span class="st">"x1"</span>,a1=<span class="st">"D"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x0"</span>,<span class="st">"x1"</span>,a2=<span class="st">"D"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x1"</span>,<span class="st">"x0"</span>,a1=<span class="st">"D"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x1"</span>,<span class="st">"x0"</span>,a2=<span class="st">"D"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x0"</span>,<span class="st">"x.paradise"</span>,a1=<span class="st">"C"</span>,a2=<span class="st">"C"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x1"</span>,<span class="st">"x.paradise"</span>,a1=<span class="st">"C"</span>,a2=<span class="st">"C"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_compile.html">rel_compile</a></span>()

<span class="kw">g</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/rel_spe.html">rel_spe</a></span>(delta=<span class="fl">0.5</span>, rho=<span class="fl">0.5</span>, r1 = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">2</span>), r2=<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">2</span>)) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/get_eq.html">get_eq</a></span>() <span class="op">%&gt;%</span>
  <span class="fu">select</span>(<span class="kw">x</span>,<span class="kw">ae.lab</span>,<span class="kw">r1</span>,<span class="kw">r2</span>,<span class="kw">U</span>,<span class="kw">v1</span>,<span class="kw">v2</span>)
</pre></div>
<pre><code>## # A tibble: 3 x 7
##   x          ae.lab     r1    r2     U    v1    v2
##   &lt;chr&gt;      &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 x0         "C | C"     2     2     4   0.4   0.4
## 2 x1         "D | D"     1     1     2   0.6   0.6
## 3 x.paradise " | "       2     2     4   2     2</code></pre>
<p>We indeed find that the optimal simple SPE in this truncated game implements <code>(C,C)</code> in state <code>x0</code> and <code>(D,D)</code> in state <code>x1</code> which also yields the assumed negotiation payoffs. Hence, we have constructed an RNE!</p>
<p>The intuition is as follows: deviating from <code>(C,C)</code> in state <code>x0</code> is not too attractive since one would end up in state <code>x1</code> that has relatively low negotiation payoff since newly negotiated relational contracts in state <code>x1</code> start with <code>(D,D)</code>. This allows to implement <code>(C,C)</code> in state <code>x0</code> . However, in state <code>x1</code> it would be more attractive to deviate from <code>(C,C)</code> since one ends up in state <code>x0</code> with higher negotiation payoffs since newly negotiated relational contracts start with <code>(C,C)</code>. Therefore, only <code>(D,D)</code> can be implemented in state <code>x1</code>.</p>
</div>
</div>
<div id="t-rne" class="section level3">
<h3 class="hasAnchor">
<a href="#t-rne" class="anchor"></a>T-RNE</h3>
<p>We will now move back to the original game with a single state <code>x0</code> and solve a T-RNE. We set <code>T=100</code>, which means that in the first 100 periods the relational contract will be newly negotiated with probability <code>rho</code> each period and in later periods no new negotiation takes place and players will essentially follow a Pareto-optimal SPE. A T-RNE essentially makes the actual period <code>t&lt;=T</code> part of the state definition, i.e. negotiation outcome in state <code>x0</code> can differ between periods. T-RNE always exist and can be quite quickly computed numerically: Let’s directly look at T-RNE for <code>delta=0.5</code> and <code>rho=0.5</code> for which no RNE existed in the coarse state space:</p>
<div class="sourceCode" id="cb29"><pre class="downlit">
<span class="kw">g</span> <span class="op">=</span> <span class="kw">g0</span> <span class="co"># Set to initial game without state x1</span>
<span class="co"># Solve a T-RNE</span>
<span class="kw">g</span> <span class="op">=</span> <span class="fu"><a href="../reference/rel_T_rne.html">rel_T_rne</a></span>(<span class="kw">g</span>,T=<span class="fl">100</span>, delta=<span class="fl">0.5</span>, rho=<span class="fl">0.5</span>, save.history = <span class="fl">TRUE</span>)

<span class="co"># Show results for earliest 6 periods</span>
<span class="fu"><a href="../reference/get_T_rne_history.html">get_T_rne_history</a></span>(<span class="kw">g</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(<span class="kw">x</span><span class="op">==</span><span class="st">"x0"</span>, <span class="kw">t</span> <span class="op">&lt;=</span> <span class="fl">6</span>) <span class="op">%&gt;%</span>
  <span class="fu">arrange</span>(<span class="kw">t</span>) <span class="op">%&gt;%</span>
  <span class="fu">select</span>(<span class="kw">t</span>,<span class="kw">ae.lab</span>,<span class="kw">r1</span>,<span class="kw">r2</span>,<span class="kw">U</span>,<span class="kw">v1</span>,<span class="kw">v2</span>)
</pre></div>
<pre><code>## # A tibble: 6 x 7
##       t ae.lab    r1    r2     U    v1    v2
##   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1 C | C      2     2     4   0.4   0.4
## 2     2 D | D      1     1     2   0.6   0.6
## 3     3 C | C      2     2     4   0.4   0.4
## 4     4 D | D      1     1     2   0.6   0.6
## 5     5 C | C      2     2     4   0.4   0.4
## 6     6 D | D      1     1     2   0.6   0.6</code></pre>
<p>We see that the equilibrium path actions in the T-RNE always alternate each period between <code>(C,C)</code> and <code>(D,D)</code> and one can verify that this alternation indeed continues up to <code>t=T.</code> So essentially, the T-RNE automatically reconstructs the finer state space partition with <code>x0</code> and <code>x1</code> for which an RNE exists. So while on first thought cycling T-RNE may seem undesirable, they actually construct here a quite intuitive solution for the Gangsta’s Paradise game.</p>
<p>Note that for other parameter constellations, there can be longer cycles. For example, if we increase the discount factor to <code>delta=0.6</code> we get three period cycles with <code>(C,C), (C,C), (D,D)</code> :</p>
<div class="sourceCode" id="cb31"><pre class="downlit">
<span class="kw">g</span> <span class="op">=</span> <span class="fu"><a href="../reference/rel_T_rne.html">rel_T_rne</a></span>(<span class="kw">g</span>,T=<span class="fl">100</span>, delta=<span class="fl">0.6</span>, rho=<span class="fl">0.5</span>, save.history = <span class="fl">TRUE</span>)
<span class="fu"><a href="../reference/get_T_rne_history.html">get_T_rne_history</a></span>(<span class="kw">g</span>)  <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(<span class="kw">x</span><span class="op">==</span><span class="st">"x0"</span>, <span class="kw">t</span> <span class="op">&lt;=</span> <span class="fl">6</span>) <span class="op">%&gt;%</span>
  <span class="fu">arrange</span>(<span class="kw">t</span>) <span class="op">%&gt;%</span>
  <span class="fu">select</span>(<span class="kw">t</span>,<span class="kw">ae.lab</span>,<span class="kw">r1</span>,<span class="kw">r2</span>,<span class="kw">U</span>,<span class="kw">v1</span>,<span class="kw">v2</span>)
</pre></div>
<pre><code>## # A tibble: 6 x 7
##       t ae.lab    r1    r2     U    v1    v2
##   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1 D | D    1.2   1.2   2.4 0.835 0.835
## 2     2 C | C    2     2     4   0.783 0.783
## 3     3 C | C    2     2     4   0.610 0.610
## 4     4 D | D    1.2   1.2   2.4 0.835 0.835
## 5     5 C | C    2     2     4   0.783 0.783
## 6     6 C | C    2     2     4   0.610 0.610</code></pre>
<p>Here the cycle starts with <code>(D,D)</code>, but that is not essential and just depends on our value for <code>T</code>. E.g. with <code>T=102</code> the cycle starts with the two cooperative periods.</p>
<div class="sourceCode" id="cb33"><pre class="downlit">
<span class="kw">g</span> <span class="op">=</span> <span class="fu"><a href="../reference/rel_T_rne.html">rel_T_rne</a></span>(<span class="kw">g</span>,T=<span class="fl">102</span>, delta=<span class="fl">0.6</span>, rho=<span class="fl">0.5</span>, save.history = <span class="fl">TRUE</span>)
<span class="fu"><a href="../reference/get_T_rne_history.html">get_T_rne_history</a></span>(<span class="kw">g</span>)  <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(<span class="kw">x</span><span class="op">==</span><span class="st">"x0"</span>, <span class="kw">t</span> <span class="op">&lt;=</span> <span class="fl">6</span>) <span class="op">%&gt;%</span>
  <span class="fu">arrange</span>(<span class="kw">t</span>) <span class="op">%&gt;%</span>
  <span class="fu">select</span>(<span class="kw">t</span>,<span class="kw">ae.lab</span>,<span class="kw">r1</span>,<span class="kw">r2</span>,<span class="kw">U</span>,<span class="kw">v1</span>,<span class="kw">v2</span>)
</pre></div>
<pre><code>## # A tibble: 6 x 7
##       t ae.lab    r1    r2     U    v1    v2
##   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1 C | C    2     2     4   0.783 0.783
## 2     2 C | C    2     2     4   0.610 0.610
## 3     3 D | D    1.2   1.2   2.4 0.835 0.835
## 4     4 C | C    2     2     4   0.783 0.783
## 5     5 C | C    2     2     4   0.610 0.610
## 6     6 D | D    1.2   1.2   2.4 0.835 0.835</code></pre>
<p>We can verify that splitting the state <code>x0</code> now into three states <code>x0</code> , <code>x1</code> and <code>x2</code> an RNE with that cycle exists. To specify the truncated game, we can use the negotiation payoffs from the T-RNE outcome. (In other examples, the T-RNE negotiation payoffs may only be approximately correct and improve for large T, but in this example things work out nicely):</p>
<div class="sourceCode" id="cb35"><pre class="downlit">
<span class="kw">g012</span> <span class="op">=</span> <span class="fu"><a href="../reference/rel_game.html">rel_game</a></span>() <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_states.html">rel_states</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"x0"</span>,<span class="st">"x1"</span>,<span class="st">"x2"</span>), A1=<span class="kw">A1</span>, A2=<span class="kw">A2</span>, pi1.form=<span class="kw">pi1</span>, pi2.form=<span class="kw">pi2</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_states.html">rel_state</a></span>(<span class="st">"x.paradise"</span>, pi1=<span class="fl">2</span>, pi2=<span class="fl">2</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x0"</span>,<span class="st">"x1"</span>,a1=<span class="st">"D"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x0"</span>,<span class="st">"x1"</span>,a2=<span class="st">"D"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x1"</span>,<span class="st">"x2"</span>,a1=<span class="st">"D"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x1"</span>,<span class="st">"x2"</span>,a2=<span class="st">"D"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x2"</span>,<span class="st">"x0"</span>,a1=<span class="st">"D"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x2"</span>,<span class="st">"x0"</span>,a2=<span class="st">"D"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x0"</span>,<span class="st">"x.paradise"</span>,a1=<span class="st">"C"</span>,a2=<span class="st">"C"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x1"</span>,<span class="st">"x.paradise"</span>,a1=<span class="st">"C"</span>,a2=<span class="st">"C"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_transition.html">rel_transition</a></span>(<span class="st">"x2"</span>,<span class="st">"x.paradise"</span>,a1=<span class="st">"C"</span>,a2=<span class="st">"C"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/rel_compile.html">rel_compile</a></span>()

<span class="co"># Solve SPE of truncated game. Use r1 and r2 from</span>
<span class="co"># T-RNE solved above</span>
<span class="kw">g012</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/rel_spe.html">rel_spe</a></span>(delta=<span class="fl">0.6</span>, rho=<span class="fl">0.5</span>, r1 = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">1.2</span>,<span class="fl">2</span>), r2=<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">1.2</span>,<span class="fl">2</span>)) <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/get_eq.html">get_eq</a></span>() <span class="op">%&gt;%</span>
  <span class="fu">select</span>(<span class="kw">x</span>,<span class="kw">ae.lab</span>,<span class="kw">r1</span>,<span class="kw">r2</span>,<span class="kw">U</span>,<span class="kw">v1</span>,<span class="kw">v2</span>)
</pre></div>
<pre><code>## # A tibble: 4 x 7
##   x          ae.lab     r1    r2     U    v1    v2
##   &lt;chr&gt;      &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 x0         "C | C"  2      2     4   0.783 0.783
## 2 x1         "C | C"  2.00   2     4   0.610 0.610
## 3 x2         "D | D"  1.2    1.2   2.4 0.835 0.835
## 4 x.paradise " | "    2      2     4   2     2</code></pre>
<p>We find that the optimal SPE in the truncated game indeed implements the same cycle as the T-RNE and the resulting negotiation payoffs are equal to the assumed ones, i.e. we have found an RNE on this finer state space.</p>
<div id="a-knife-edge-case-with-infinite-cycle-length" class="section level4">
<h4 class="hasAnchor">
<a href="#a-knife-edge-case-with-infinite-cycle-length" class="anchor"></a>A Knife-Edge Case with Infinite Cycle Length</h4>
<p>Our theoretical analysis of the Gangsta’s Paradise game in our paper reveals that for <code>delta=1/3</code> mutual cooperation could be implemented in the truncated game if and only if the negotiation payoffs outside paradise are exactly 0.</p>
<p>As we converge with the discount factor from above towards <code>1/3</code> with a positive negotiation probability, the T-RNE cycles become larger and larger. E.g.</p>
<div class="sourceCode" id="cb37"><pre class="downlit">
<span class="kw">g</span> <span class="op">=</span> <span class="kw">g0</span> <span class="co"># Set to initial game without state x1</span>
<span class="co"># Solve a T-RNE</span>
<span class="kw">g</span> <span class="op">=</span> <span class="fu"><a href="../reference/rel_T_rne.html">rel_T_rne</a></span>(<span class="kw">g</span>,T=<span class="fl">505</span>, delta=<span class="fl">0.3334</span>, rho=<span class="fl">0.5</span>, save.history = <span class="fl">TRUE</span>,tol=<span class="fl">1e-12</span>)

<span class="co"># Show results for earliest 6 periods</span>
<span class="kw">hist</span> <span class="op">=</span> <span class="fu"><a href="../reference/get_T_rne_history.html">get_T_rne_history</a></span>(<span class="kw">g</span>)
<span class="kw">hist</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(<span class="kw">x</span><span class="op">==</span><span class="st">"x0"</span>, <span class="kw">t</span> <span class="op">&lt;=</span> <span class="fl">12</span>) <span class="op">%&gt;%</span>
  <span class="fu">arrange</span>(<span class="kw">t</span>) <span class="op">%&gt;%</span>
  <span class="fu">select</span>(<span class="kw">t</span>,<span class="kw">ae.lab</span>,<span class="kw">r1</span>,<span class="kw">r2</span>,<span class="kw">U</span>,<span class="kw">v1</span>,<span class="kw">v2</span>)
</pre></div>
<pre><code>## # A tibble: 12 x 7
##        t ae.lab       r1       r2        U       v1       v2
##    &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1     1 C | C  2        2        4        0.000102 0.000102
##  2     2 D | D  0.000305 0.000305 0.000611 0.000304 0.000304
##  3     3 D | D  0.000916 0.000916 0.00183  0.000909 0.000909
##  4     4 D | D  0.00275  0.00275  0.00549  0.00270  0.00270 
##  5     5 D | D  0.00824  0.00824  0.0165   0.00798  0.00798 
##  6     6 D | D  0.0247   0.0247   0.0494   0.0232   0.0232  
##  7     7 D | D  0.0741   0.0741   0.148    0.0649   0.0649  
##  8     8 D | D  0.222    0.222    0.445    0.167    0.167   
##  9     9 D | D  0.667    0.667    1.33     0.333    0.333   
## 10    10 C | C  2        2        4        0.000102 0.000102
## 11    11 D | D  0.000305 0.000305 0.000611 0.000304 0.000304
## 12    12 D | D  0.000916 0.000916 0.00183  0.000909 0.000909</code></pre>
<p>The knife-edge case of <code>delta=1/3</code> can be seen as the limit case, with an infinitely long cycle. (Due to floating point arithmetic inaccuracies, we will still find a finite cycle when solving this knife-edge case numerically.) In this knife-edge case, splitting the state space into a finite finer partition would not help to reestablish existence of an RNE. Our blackmailing game example seems to be a similar knife-edge case.</p>
</div>
<div id="a-conjecture-we-cant-prove" class="section level4">
<h4 class="hasAnchor">
<a href="#a-conjecture-we-cant-prove" class="anchor"></a>A conjecture we can’t prove</h4>
<p>Of course, the examples suggest the conjecture that for general stochastic games one could generically (i.e. except for certain knife-edge cases) partition the state space into a finite set of finer states (using only time <code>t</code> not any other aspects of the played history for this partition) such that then an RNE exists. Unfortunately, we honestly have no clue how to prove such a conjecture (nor how to cleanly formulate what <em>generically</em> means in this context). We even don’t have a strong intuition whether the conjecture holds. So we would relegate this question to future research.</p>
</div>
</div>
<div id="mpe-show-similar-symptoms" class="section level3">
<h3 class="hasAnchor">
<a href="#mpe-show-similar-symptoms" class="anchor"></a>MPE show similar symptoms</h3>
<p>One may have wondered whether these cycles are due to some special assumption in the definition of RNE or T-RNE. Yet, in this last section, we want to show that Markov perfect equilibria exhibit similar behavior. The following game finds an MPE of the original game with a single prisoners’ dilemma state <code>x0</code> for <code>delta=0.5</code>:</p>
<div class="sourceCode" id="cb39"><pre class="downlit">
<span class="fu"><a href="../reference/rel_mpe.html">rel_mpe</a></span>(<span class="kw">g0</span>,delta = <span class="fl">0.5</span>) <span class="op">%&gt;%</span> <span class="fu">get_mpe</span>()
</pre></div>
<pre><code>## # A tibble: 2 x 6
##   x             u1    u2    ae ae.a1 ae.a2
##   &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
## 1 x0             0     0     4 D     D    
## 2 x.paradise     2     2     1 &lt;NA&gt;  &lt;NA&gt;</code></pre>
<p>Players will mutually defect. The algorithm tries to find a single MPE but in principle there could be more MPE. The function <code>rel_mpe</code> has the argument <code>a.init.guess</code> that allows to specify an initial guess of the action profiles played in an MPE. If an MPE with these action profiles exists it will be returned. Let us check whether also an MPE with mutual cooperation exists:</p>
<div class="sourceCode" id="cb41"><pre class="downlit">
<span class="co"># Action profile indeces can be seen by looking at g$ax.grid</span>
<span class="co"># 1 = (C,C) 4=(D,D)</span>
<span class="fu"><a href="../reference/rel_mpe.html">rel_mpe</a></span>(<span class="kw">g0</span>,delta = <span class="fl">0.5</span>, a.init.guess = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">1</span>)) <span class="op">%&gt;%</span> <span class="fu">get_mpe</span>()
</pre></div>
<pre><code>## # A tibble: 2 x 6
##   x             u1    u2    ae ae.a1 ae.a2
##   &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
## 1 x0             0     0     4 D     D    
## 2 x.paradise     2     2     1 &lt;NA&gt;  &lt;NA&gt;</code></pre>
<p>No. The algorithm again returns the MPE where<code>(D,D)</code> is played. This means the highest MPE payoff is 0 in this game.</p>
<p>Let us now compute MPE in the game variant in which state <code>x0</code> is split in alternating states <code>x0</code> and <code>x1</code>. The MPE where always <code>(D,D)</code> is played obviously still exists and it will also be found by default with our algorithm:</p>
<div class="sourceCode" id="cb43"><pre class="downlit">
<span class="fu"><a href="../reference/rel_mpe.html">rel_mpe</a></span>(<span class="kw">g01</span>,delta = <span class="fl">0.5</span>) <span class="op">%&gt;%</span> <span class="fu">get_mpe</span>()
</pre></div>
<pre><code>## # A tibble: 3 x 6
##   x             u1    u2    ae ae.a1 ae.a2
##   &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
## 1 x0             0     0     4 D     D    
## 2 x1             0     0     4 D     D    
## 3 x.paradise     2     2     1 &lt;NA&gt;  &lt;NA&gt;</code></pre>
<p>But let’s check whether there is also an MPE where <code>(C,C)</code> is played in state <code>x0</code> and <code>(D,D)</code> ins state <code>x1</code> by providing these action profiles as initial guess:</p>
<div class="sourceCode" id="cb45"><pre class="downlit">
<span class="fu"><a href="../reference/rel_mpe.html">rel_mpe</a></span>(<span class="kw">g01</span>,delta = <span class="fl">0.5</span>, a.init.guess=<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">4</span>,<span class="fl">1</span>)) <span class="op">%&gt;%</span> <span class="fu">get_mpe</span>()
</pre></div>
<pre><code>## # A tibble: 3 x 6
##   x             u1    u2    ae ae.a1 ae.a2
##   &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
## 1 x0             2     2     1 C     C    
## 2 x1             1     1     4 D     D    
## 3 x.paradise     2     2     1 &lt;NA&gt;  &lt;NA&gt;</code></pre>
<p>Indeed this MPE also exists and it Pareto-dominates the MPE where always <code>(D,D)</code> is played. MPE are not plagued by non-existence because there is no requirement to always pick a Pareto-optimal MPE. But otherwise the behavior seems similar to that of RNE. Picking a finer state space allows more efficient MPE to pop-up. While this point is obvious if one would e.g. define the history of the game as part of the state, it interestingly also arises just by assuming that states alternate each period. In this sense one could argue that the “finer state-space effects” and “cycle effects” of RNE and T-RNE are in some sense inherited from MPE.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Sebastian Kranz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
